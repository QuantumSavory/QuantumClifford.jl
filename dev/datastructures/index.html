<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Datastructure Choice · QuantumClifford.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">QuantumClifford.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">QuantumClifford.jl</a></li><li><a class="tocitem" href="../manual/">Manual</a></li><li><a class="tocitem" href="../canonicalization/">Canonicalization</a></li><li><a class="tocitem" href="../mixed/">Mixed States</a></li><li><a class="tocitem" href="../graphs/">Graph States</a></li><li class="is-active"><a class="tocitem" href>Datastructure Choice</a><ul class="internal"><li><a class="tocitem" href="#Choosing-Appropriate-Data-Structure"><span>Choosing Appropriate Tableau Data Structure</span></a></li><li><a class="tocitem" href="#Bit-Packing-in-Integers-and-Array-Order"><span>Bit Packing in Integers and Array Order</span></a></li></ul></li><li><a class="tocitem" href="../commonstates/">Useful States and Operators</a></li><li><a class="tocitem" href="../plotting/">Plotting</a></li><li><a class="tocitem" href="../API/">API</a></li><li><a class="tocitem" href="../tutandpub/">Tutorials and Publications</a></li><li><span class="tocitem">Noisy Circuits</span><ul><li><a class="tocitem" href="../noisycircuits/">Simulation of Noisy Circuits</a></li><li><a class="tocitem" href="../noisycircuits_mc/">Monte Carlo</a></li><li><a class="tocitem" href="../noisycircuits_perturb/">Perturbative Expansions</a></li><li><a class="tocitem" href="../noisycircuits_ops/">Circuit Operations</a></li><li><a class="tocitem" href="../noisycircuits_API/">API</a></li></ul></li><li><a class="tocitem" href="../references/">Suggested Readings &amp; References</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Datastructure Choice</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Datastructure Choice</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/Krastanov/QuantumClifford.jl/blob/master/docs/src/datastructures.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Data-Structures-Options"><a class="docs-heading-anchor" href="#Data-Structures-Options">Data Structures Options</a><a id="Data-Structures-Options-1"></a><a class="docs-heading-anchor-permalink" href="#Data-Structures-Options" title="Permalink"></a></h1><h2 id="Choosing-Appropriate-Data-Structure"><a class="docs-heading-anchor" href="#Choosing-Appropriate-Data-Structure">Choosing Appropriate Tableau Data Structure</a><a id="Choosing-Appropriate-Data-Structure-1"></a><a class="docs-heading-anchor-permalink" href="#Choosing-Appropriate-Data-Structure" title="Permalink"></a></h2><p>There are four different data structures used to represent stabilizer states. If you will never need projective measurements you probably would want to use <a href="../API/#QuantumClifford.Stabilizer"><code>Stabilizer</code></a>. If you require projective measurements, but only on pure states, <a href="../API/#QuantumClifford.Destabilizer"><code>Destabilizer</code></a> should be the appropriate data structure. If mixed stabilizer states are involved, <a href="../API/#QuantumClifford.MixedStabilizer"><code>MixedStabilizer</code></a> would be necessary.</p><p><a href="../API/#QuantumClifford.Stabilizer"><code>Stabilizer</code></a> is simply a list of Pauli operators in a tableau form. As a data structure it does not enforce the requirements for a pure stabilizer state (the rows of the tableau do not necessarily commute, nor are they forced to be Hermitian; the tableau might be underdetermined, redundant, or contradictory). It is up to the user to ensure that the initial values in the tableau are meaningful and consistent.</p><p><a href="../API/#QuantumClifford.canonicalize!-Tuple{QuantumClifford.AbstractStabilizer}"><code>canonicalize!</code></a>, <a href="../API/#QuantumClifford.project!-Tuple{Destabilizer, PauliOperator}"><code>project!</code></a>, and <a href="../API/#QuantumClifford.generate!-Union{Tuple{Tm}, Tuple{Tv}, Tuple{Tme}, Tuple{Tzv}, Tuple{Tz}, Tuple{PauliOperator{Tz, Tv}, Stabilizer{Tzv, Tm}}} where {Tz&lt;:AbstractArray{UInt8, 0}, Tzv&lt;:AbstractVector{UInt8}, Tme&lt;:Unsigned, Tv&lt;:AbstractVector{Tme}, Tm&lt;:AbstractMatrix{Tme}}"><code>generate!</code></a> can accept an under determined (mixed state) <code>Stabilizer</code> instance and operate correctly. <code>canonicalize!</code> can also accept a redundant <code>Stabilizer</code> (i.e. not all rows are independent), leaving as many identity rows at the bottom of the canonicalized tableau as the number of redundant stabilizers in the initial tableau.</p><p><code>canonicalize!</code> takes <span>$\mathcal{O}(n^3)$</span> steps. <code>generate!</code> expects a canonicalized input and then takes <span>$\mathcal{O}(n^2)$</span> steps. <code>project!</code> takes <span>$\mathcal{O}(n^3)$</span> for projecting on commuting operators due to the need to call <code>canonicalize!</code> and <code>generate!</code>. If the projections is on an anticommuting operator (or if <code>keep_result=false</code>) then it takes <span>$\mathcal{O}(n^2)$</span> steps.</p><p><a href="../API/#QuantumClifford.MixedStabilizer"><code>MixedStabilizer</code></a> provides explicit tracking of the rank of the mixed state and works properly when the projection is on a commuting operator not in the stabilizer (see table below for details). Otherwise it has the same performance as <code>Stabilizer</code>.</p><p>The canonicalization can be made unnecessary if we track the destabilizer generators. There are two data structures capable of that.</p><p><a href="../API/#QuantumClifford.Destabilizer"><code>Destabilizer</code></a> stores both the destabilizer and stabilizer states. <code>project!</code> called on it never requires a stabilizer canonicalization, hence it runs in <span>$\mathcal{O}(n^2)$</span>. However, <code>project!</code> will raise an exception if you try to project on a commuting state that is not in the stabilizer as that would be an expensive operation (<span>$\mathcal{O}(n^3)$</span>).</p><p><a href="../API/#QuantumClifford.MixedDestabilizer"><code>MixedDestabilizer</code></a> tracks both the destabilizer operators and the logical operators in addition to the stabilizer generators. It does not require canonicalization for measurements and its <code>project!</code> operations always takes <span>$\mathcal{O}(n^2)$</span>.</p><p>For the operation <code>_, anticom_index, result = project!(...)</code> we have the following behavior:</p><table><tr><th style="text-align: right">projection</th><th style="text-align: right"><a href="../API/#QuantumClifford.Stabilizer"><code>Stabilizer</code></a></th><th style="text-align: right"><a href="../API/#QuantumClifford.MixedStabilizer"><code>MixedStabilizer</code></a></th><th style="text-align: right"><a href="../API/#QuantumClifford.Destabilizer"><code>Destabilizer</code></a></th><th style="text-align: right"><a href="../API/#QuantumClifford.MixedDestabilizer"><code>MixedDestabilizer</code></a></th></tr><tr><td style="text-align: right">on anticommuting operator <code>anticom_index&gt;0</code> <code>result===nothing</code></td><td style="text-align: right">correct result in <span>$\mathcal{O}(n^2)$</span> steps</td><td style="text-align: right">same as <code>Stabilizer</code></td><td style="text-align: right">same as <code>Stabilizer</code></td><td style="text-align: right">same as <code>Stabilizer</code></td></tr><tr><td style="text-align: right">on commuting operator in the stabilizer <code>anticom_index==0</code> <code>result!==nothing</code></td><td style="text-align: right"><span>$\mathcal{O}(n^3)$</span>; or <span>$\mathcal{O}(n^2)$</span> if <code>keep_result=false</code></td><td style="text-align: right"><span>$\mathcal{O}(n^3)$</span></td><td style="text-align: right"><span>$\mathcal{O}(n^2)$</span> if the state is pure, throws exception otherwise</td><td style="text-align: right"><span>$\mathcal{O}(n^2)$</span></td></tr><tr><td style="text-align: right">on commuting operator out of the stabilizer<sup class="footnote-reference"><a id="citeref-1" href="#footnote-1">[1]</a></sup>  <code>anticom_index==0</code> <code>result===nothing</code></td><td style="text-align: right"><span>$\mathcal{O}(n^3)$</span>, but the user needs to manually include the new operator to the stabilizer; or <span>$\mathcal{O}(n^2)$</span> if <code>keep_result=false</code> but then result indistinguishable from cell above</td><td style="text-align: right"><span>$\mathcal{O}(n^3)$</span> and rank goes up by one</td><td style="text-align: right">not applicable if the state is pure, throws exception otherwise</td><td style="text-align: right"><span>$\mathcal{O}(n^2)$</span> and rank goes up by one</td></tr></table><p>Notice that extra care needs to be given when the projection operator commutes with the state but is not generated by the stabilizers of the state (the last row of the table). In that case we have <code>_, anticom_index, result = project!(...)</code> where both <code>anticom_index==0</code> and <code>result===nothing</code>. Notice this means that <code>project!(...;keep_result==false)</code> can not distinguish between the second and third row of the table above.</p><h2 id="Bit-Packing-in-Integers-and-Array-Order"><a class="docs-heading-anchor" href="#Bit-Packing-in-Integers-and-Array-Order">Bit Packing in Integers and Array Order</a><a id="Bit-Packing-in-Integers-and-Array-Order-1"></a><a class="docs-heading-anchor-permalink" href="#Bit-Packing-in-Integers-and-Array-Order" title="Permalink"></a></h2><p>We do not use boolean arrays to store information about the qubits as this would be wasteful (7 out of 8 bits in the boolean would be unused). Instead, we use all 8 qubits in a byte and peform bitwise logical operations as necessary. Implementation details of the object in RAM can matter for performance. The library permits any of the standard <code>UInt</code> types to be used for packing the bits, and larger <code>UInt</code> types (like <code>UInt64</code>) are usually faster as they permit working on 64 qubits at a time (instead of 1 if we used a boolean, or 8 if we used a byte).</p><p>Moreover, how a tableau is stored in memory can affect performance, as a row-major storage usually permits more efficient use of the CPU cache (for the particular algorithms we use).</p><p>Both of these parameters are <a href="../bench_intsize.png">benchmarked</a> (testing the application of a Pauli operator, which is an <span>$\mathcal{O}(n^2)$</span> operation; and testing the canonicalization of a Stabilizer, which is an <span>$\mathcal{O}(n^2)$</span> operation). The code for these benchmarks can be found in the <code>benchmarks</code> folder. Row-major UInt64 is the best performing and it is mostly used by default in this library. </p><p>All benchmarks were executed on a Ryzen Zen1 CPU.</p><section class="footnotes is-size-7"><ul><li class="footnote" id="footnote-1"><a class="tag is-link" href="#citeref-1">1</a>This can occur only if the state being projected is mixed. Both <code>Stabilizer</code> and <code>Destabilizer</code> can be used for mixed states by simply providing fewer stabilizer generators than qubits at initialization. This can be useful for low-level code that tries to avoid the extra memory cost of using <code>MixedStabilizer</code> and <code>MixedDestabilizer</code> but should be avoided otherwise. <code>project!</code> works correctly or raises an explicit warning on all 4 data structures.</li></ul></section></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../graphs/">« Graph States</a><a class="docs-footer-nextpage" href="../commonstates/">Useful States and Operators »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.10 on <span class="colophon-date" title="Tuesday 4 January 2022 16:18">Tuesday 4 January 2022</span>. Using Julia version 1.7.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
